!function(u){u.fn.btsListFilter=function(e,l){"use strict";var t,a,i,n,s,o=this,r=u(this),c=u(e),d=r;return l=u.extend({delay:300,minLength:1,initial:!0,casesensitive:!1,eventKey:"keyup",resetOnBlur:!0,sourceData:null,sourceTmpl:'<a class="list-group-item" href="#"><span>{title}</span></a>',sourceNode:function(e){return t=l.sourceTmpl,i=e,t.replace(/\{ *([\w_]+) *\}/g,function(e,t){return i[t]||""});var t,i},emptyNode:function(e){return'<a class="list-group-item well" href="#"><span>No Results</span></a>'},cancelNode:function(){return'<span class="btn glyphicon glyphicon-remove form-control-feedback" aria-hidden="true"></span>'},loadingClass:"bts-loading-list",itemClassTmp:"bts-dynamic-item",itemEl:".list-group-item",itemChild:null,itemFilter:function(e,t){t=t&&t.replace(new RegExp("[({[^.$*+?\\]})]","g"),"");var i=u(e).text(),n=l.initial?"^":"";return new RegExp(n+t,l.casesensitive?"":"i").test(i)}},l),o.reset=function(){c.val("").trigger(l.eventKey)},u.isFunction(l.cancelNode)&&(t=u(l.cancelNode.call(o)).hide(),c.after(t),c.parents(".form-group").addClass("has-feedback"),c.prev().is(".control-label")||t.css({top:0}),t.css({"pointer-events":"auto"}),t.on("click",o.reset)),c.on(l.eventKey,(i=function(e){var i=u(this).val();l.itemEl&&(d=r.find(l.itemEl)),l.itemChild&&(d=d.find(l.itemChild));var n=d.filter(function(){return l.itemFilter.call(o,this,i)}),s=d.not(n);l.itemChild&&(n=n.parents(l.itemEl),s=s.parents(l.itemEl).hide()),""!==i&&i.length>=l.minLength?(n.show(),s.hide(),t.show(),"function"===u.type(l.sourceData)?(n.hide(),s.hide(),a&&(u.isFunction(a.abort)?a.abort():u.isFunction(a.stop)&&a.stop()),r.addClass(l.loadingClass),a=l.sourceData.call(o,i,function(e){if(a=null,n.hide(),s.hide(),r.find("."+l.itemClassTmp).remove(),e&&0!==e.length)for(var t in e)u(l.sourceNode.call(o,e[t])).addClass(l.itemClassTmp).appendTo(r);else u(l.emptyNode.call(o,i)).addClass(l.itemClassTmp).appendTo(r);r.removeClass(l.loadingClass)})):(r.find("."+l.itemClassTmp).remove(),0===n.length&&u(l.emptyNode.call(o,i)).addClass(l.itemClassTmp).appendTo(r))):(n.show(),s.show(),t.hide(),r.find("."+l.itemClassTmp).remove())},n=(n=l.delay)||300,function(){var e=this,t=arguments;clearTimeout(s),s=setTimeout(function(){i.apply(e,Array.prototype.slice.call(t))},n)})),l.resetOnBlur&&c.on("blur",function(e){}),r}}(jQuery);