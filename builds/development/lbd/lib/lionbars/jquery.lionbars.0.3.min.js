!function(U){U.fn.hasScrollBar=function(){return this.get(0).scrollHeight>this.height()},U.fn.lionbars=function(i){function a(t,r){var l,i,e,s,a=U(t).get(0);k=void 0!==r?r.height:a.scrollHeight,q=void 0!==r?r.width:a.scrollWidth,E=a.clientHeight,D=a.clientWidth,A=a.offsetHeight,z=a.offsetWidth,l=U(t),(i=U(l)).css({overflow:"auto"}),y=z-D-S-j,i.css({overflow:"hidden"}),e=U(t),(s=U(e)).css({overflow:"auto"}),T=A-E-R-Q,s.css({overflow:"hidden"})}function n(t){var r,l,i=U(t);if(B=C=!1,r=U(i),L=parseInt(r.css("padding-top").replace("px","")),X=parseInt(r.css("padding-left").replace("px","")),Y=parseInt(r.css("padding-bottom").replace("px","")),O=parseInt(r.css("padding-right").replace("px","")),l=U(i),R=parseInt(l.css("border-top-width").replace("px","")),j=parseInt(l.css("border-right-width").replace("px","")),Q=parseInt(l.css("border-bottom-width").replace("px","")),S=parseInt(l.css("border-left-width").replace("px","")),i.css({overflow:"hidden"}),i.get(0).scrollHeight>i.get(0).clientHeight&&(C=!0),i.get(0).scrollWidth>i.get(0).clientWidth&&(B=!0),i.css({overflow:"auto"}),C||B)return!0}function o(t,r,l){var i,e,s,a,n,o,d,c,h,b=U(t);(r||l)&&(b.css({overflow:"hidden"}),d=(o=b).find(".lb-wrap"),c=U(o),h=U(d),c.css({padding:0}),h.css({"padding-top":L+"px","padding-left":X+"px","padding-bottom":Y+"px","padding-right":O+"px"}),(n=U(b)).css({width:n.width()+X+O,height:n.height()+L+Y}),e=(i=b).find(".lb-wrap"),s=U(i),a=U(e),s.css({position:"relative"}),a.css({width:s.width()+y-X-O,height:s.height()+T-L-Y}))}function d(t){var r=U(t);P=C&&B?(N=r.height()-12,r.width()-12):(N=r.height()-4,r.width()-4),r.find(".lb-v-scrollbar").css({height:N}),r.find(".lb-h-scrollbar").css({width:P})}function c(){C=B=!1,P=N=K=J=E=D=A=z=q=k=j=Q=S=R=O=Y=X=L=T=y=0}function h(t){var r,l,i,e=U(t);0!=e.find(".lb-v-scrollbar").length&&(r=20,i=A-e.find(".lb-v-scrollbar").height(),l=A-i-r,J=(J=Math.round(A*l/k))<r?r:J),0!=e.find(".lb-h-scrollbar").length&&(r=20,i=z-e.find(".lb-h-scrollbar").width(),l=z-i-r,K=(K=Math.round(z*l/q))<r?r:K),e.find(".lb-v-scrollbar-slider").css({height:J}),e.find(".lb-h-scrollbar-slider").css({width:K})}function b(t){F=(A-U(t).find(".lb-wrap").get(0).scrollHeight-R-Q)/(N-J),G=(z-U(t).find(".lb-wrap").get(0).scrollWidth-S-j)/(P-K);var r=U(t);r.attr("vratio",F),r.attr("hratio",G)}function p(t){var l=U(t);(C||B)&&l.find(".lb-wrap").scroll(function(t){if(l.find(".lb-v-scrollbar-slider").css({top:-U(this).scrollTop()/l.attr("vratio")}),l.find(".lb-h-scrollbar-slider").css({left:-U(this).scrollLeft()/l.attr("hratio")}),l.find(".lb-v-scrollbar").height()==parseInt(l.find(".lb-v-scrollbar-slider").css("top"))+l.find(".lb-v-scrollbar-slider").height()&&"function"==typeof i.reachedBottom&&!x){x=!0;var r=U(this);i.reachedBottom.apply(U(this).children(".lb-content"),[function(){a(U(r).parent(),{height:U(r).children(".lb-content").get(0).scrollHeight,width:U(r).children(".lb-content").get(0).scrollWidth}),d(U(r).parent()),h(U(r).parent()),b(U(r).parent()),c(),x=!1}])}if(l.find(".lb-h-scrollbar").width()==parseInt(l.find(".lb-h-scrollbar-slider").css("left"))+l.find(".lb-h-scrollbar-slider").width()&&"function"==typeof i.reachedRight&&!H){H=!0;r=U(this);i.reachedRight.apply(U(this).children(".lb-content"),[function(){a(U(r).parent(),{height:U(r).children(".lb-content").get(0).scrollHeight,width:U(r).children(".lb-content").get(0).scrollWidth}),d(U(r).parent()),h(U(r).parent()),b(U(r).parent()),c(),H=!1}])}autohide&&(l.find(".lb-v-scrollbar, .lb-h-scrollbar").fadeIn(150),clearTimeout(e),e=setTimeout(function(){l.find(".lb-v-scrollbar, .lb-h-scrollbar").fadeOut(150)},2e3))}),C&&(l.find(".lb-v-scrollbar-slider").mousedown(function(t){return s=t.pageY,w=!0,m=U(this),I=l.find(".lb-wrap"),g=I.parent().attr("vratio"),v=m.position().top,!1}),l.find(".lb-v-scrollbar").mousedown(function(t){return U(t.target).hasClass("lb-v-scrollbar-slider")||l.find(".lb-wrap").scrollTop((t.pageY-U(this).offset().top)*Math.abs(l.attr("vratio"))-U(this).find(".lb-v-scrollbar-slider").height()/2),!1})),B&&(l.find(".lb-h-scrollbar-slider").mousedown(function(t){return r=t.pageX,u=!0,m=U(this),I=l.find(".lb-wrap"),g=I.parent().attr("hratio"),v=m.position().left,!1}),l.find(".lb-h-scrollbar").mousedown(function(t){return U(t.target).hasClass("lb-h-scrollbar-slider")||l.find(".lb-wrap").scrollLeft((t.pageX-U(this).offset().left)*Math.abs(l.attr("hratio"))-U(this).find(".lb-h-scrollbar-slider").width()/2),!1})),(C||B)&&autohide&&(l.find(".lb-v-scrollbar, .lb-h-scrollbar").hide(),l.hover(function(){},function(){l.find(".lb-v-scrollbar, .lb-h-scrollbar").fadeOut(150)}))}i=i||{},autohide=i.autohide;var e,r,s,l,f,g,v,u=!1,w=!1,m=0,I=0,x=!1,H=!1,W=U(this),M=0,y=0,T=0,B=!1,C=!1,L=0,X=0,Y=0,O=0,R=0,j=0,Q=0,S=0,k=0,q=0,z=0,A=0,D=0,E=0,F=0,G=0,J=0,K=0,N=0,P=0;return function(){for(var t=0;void 0!==W[t];t++)n(W[t])&&!U(W[t]).hasClass("nolionbars")&&(target=W[t],a(target),r=target,l=C,i=B,e=void 0,e=U(r),(void 0!==(s=e.attr("id"))?(e.wrapInner('<div class="lb-wrap" id="lb-wrap-'+M+"-"+s+'"></div>'),U("#lb-wrap-"+M+"-"+s)):(e.wrapInner('<div class="lb-wrap" id="lb-wrap-'+M+'"></div>'),U("#lb-wrap-"+M))).wrapInner('<div class="lb-content"></div>'),l&&(e.prepend('<div class="lb-v-scrollbar"></div>'),e.find(".lb-v-scrollbar").append('<div class="lb-v-scrollbar-slider"></div>')),i&&(e.prepend('<div class="lb-h-scrollbar"></div>'),e.find(".lb-h-scrollbar").append('<div class="lb-h-scrollbar-slider"></div>')),M+=1,o(target,C,B),d(target),h(target),b(target),p(target),c());var r,l,i,e,s}(),U(document).mousemove(function(t){w&&(f=t.pageY,I.scrollTop((v+f-s)*Math.abs(g))),u&&(l=t.pageX,I.scrollLeft((v+l-r)*Math.abs(g)))}),U(document).mouseup(function(t){w&&(w=!1),u&&(u=!1)}),this.each(function(){})}}(jQuery);